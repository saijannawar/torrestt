# 1. Main Category
type Category @model @auth(rules: [
  { allow: public, operations: [read] },
  { allow: private, operations: [read] },
  { allow: groups, groups: ["admin"], operations: [create, read, update, delete] }
]) {
  id: ID!
  name: String!
  slug: String!
  image: String        # New field for cover image
  rank: Int            # New field for custom ordering
  subCategories: [SubCategory] @hasMany(indexName: "byCategory", fields: ["id"])
}

# 2. Sub Category
type SubCategory @model @auth(rules: [
  { allow: public, operations: [read] },
  { allow: private, operations: [read] },
  { allow: groups, groups: ["admin"], operations: [create, read, update, delete] }
]) {
  id: ID!
  name: String!
  slug: String!
  categoryID: ID! @index(name: "byCategory")
  category: Category @belongsTo(fields: ["categoryID"])
  products: [Product] @hasMany(indexName: "bySubCategory", fields: ["id"])
}

# 3. Product
type Product @model @auth(rules: [
  { allow: public, operations: [read] },
  { allow: private, operations: [read] },
  { allow: owner },
  { allow: groups, groups: ["admin"], operations: [create, read, update, delete] }
]) {
  id: ID!
  name: String!
  description: String
  price: Float
  thumbnailUrl: String
  fileUrl: String

  # Seller Dashboard Fields
  status: String! @default(value: "PENDING") 
  adminFeedback: String
  techStack: String
  livePreviewUrl: String

  subCategoryID: ID! @index(name: "bySubCategory")
  subCategory: SubCategory @belongsTo(fields: ["subCategoryID"])
}

# 4. Prime Service
type PrimeService @model @auth(rules: [
  { allow: public, operations: [read] },
  { allow: private, operations: [read] },
  { allow: groups, groups: ["admin"], operations: [create, read, update, delete] }
]) {
  id: ID!
  name: String!
  url: String!
  isActive: Boolean
}

# 5. Stock Photo Services
type PhotoCategory @model @auth(rules: [
  { allow: public, operations: [read] },
  { allow: private, operations: [read] },
  { allow: groups, groups: ["admin"], operations: [create, read, update, delete] }
]) {
  id: ID!
  name: String!
  slug: String!
  description: String
}

# 6. Seller Profile
type SellerProfile @model @auth(rules: [
  { allow: owner, operations: [create, read, update] },
  { allow: public, operations: [read] },
  { allow: groups, groups: ["admin"], operations: [create, read, update, delete] }
]) {
  id: ID!
  shopName: String!
  description: String
  website: String
  status: String! @default(value: "PENDING")
  owner: String
  
  sellerType: String!
  
  # Student Specific
  collegeName: String
  collegeEmail: String
  studentIdCardUrl: String
  
  # Freelancer Specific
  personalIdCardUrl: String
  portfolioUrl: String
  experienceYears: Int
  
  # Company Specific
  companyRegistrationNum: String
  companyDocumentUrl: String
  companyLinkedin: String
}

# 7. Photo Bundle
type PhotoBundle @model @auth(rules: [
  { allow: public, operations: [read] },
  { allow: private, operations: [create, read, update, delete] }
]) {
  id: ID!
  title: String!
  description: String
  bundlePrice: Float!
  coverImage: String!
  zipUrl: String
  category: String
  photos: [StockPhoto] @hasMany(indexName: "byBundle", fields: ["id"])
}

# 8. Single Stock Photo
type StockPhoto @model @auth(rules: [
  { allow: public, operations: [read] },
  { allow: private, operations: [create, read, update, delete] }
]) {
  id: ID!
  title: String!
  singlePrice: Float!
  url: String!
  bundleID: ID! @index(name: "byBundle")
  bundle: PhotoBundle @belongsTo(fields: ["bundleID"])
}